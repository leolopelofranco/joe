Joe.config(["$stateProvider", "$httpProvider", "$urlRouterProvider", "$locationProvider", "AuthProvider", function($stateProvider, $httpProvider, $urlRouterProvider, $locationProvider, AuthProvider) {
  $stateProvider
    .state('index', {
      url: '/',
      templateUrl: '<%= asset_path("main/home.html") %>',
      controller: 'IndexController'
    })

    .state('login', {
      url: '/login',
      templateUrl: '<%= asset_path("users/login.html") %>',
      controller: 'IndexController'
    })

    .state('welcome', {
      url: '/welcome/:patient_id',
      templateUrl: '<%= asset_path("main/welcome.html") %>',
      controller: 'HomeController'
    })

    .state('signup', {
      url: '/signup',
      templateUrl: '<%= asset_path("users/signup.html") %>',
      controller: 'SignupController'
    })

    .state('reminder', {
      url: '/patients/:patient_id/schedule',
      templateUrl: '<%= asset_path("main/reminder.html") %>',
      controller: 'ReminderController'
    })

    .state('list', {
      url: '/list',
      templateUrl: '<%= asset_path("main/list.html") %>',
      controller: 'ListController'
    })

    .state('detail', {
      url: '/patients/:patient_id',
      templateUrl: '<%= asset_path("main/detail.html") %>',
      controller: 'DetailController'
    })

    .state('edit_schedule', {
      url: '/patients/:patient_id/schedule/:schedule_id',
      templateUrl: '<%= asset_path("main/edit.html") %>',
      controller: 'EditController'
    })

    $httpProvider.defaults.withCredentials = true;
    AuthProvider.registerPath('register');
    $urlRouterProvider.otherwise('/');
    $locationProvider.html5Mode({
  enabled: true,
  requireBase: false
});

  }]).run(["$rootScope", "$state", function($rootScope, $state) {
      $rootScope.$state = $state;
    }]);
